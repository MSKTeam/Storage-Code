const PreloadChapter={arr:[],compile:function(){let t=this.arr,e="";for(let s=0;s<t.length;s++){let n=window.location.pathname;if(t[s].link.includes(n)){t[s+2]&&s+2!=t.length-0&&(e+=`<link href="${t[s+2].link}" rel="prefetch"></link><link href="${t[s+2].link}" rel="prerender" as="document"></link>`),t[s-2]&&(e+=`<link href="${t[s-2].link}" rel="prefetch"></link><link href="${t[s-2].link}" rel="prerender" as="document"></link>`),t[s+1]&&s+1!=t.length-0&&(e+=`<link href="${t[s+1].link}" rel="prefetch"></link><link href="${t[s+1].link}" rel="prerender" as="document"></link>`),t[s-1]&&(e+=`<link href="${t[s-1].link}" rel="prefetch"></link><link href="${t[s-1].link}" rel="prerender" as="document"></link>`);break}}jQuery("#PreloadChapter").html(e)},create:function(t){let e=this;Promise.all([`/feeds/posts/summary/-/${e.settings.cat}?alt=json-in-script&start-index=2&max-results=150`,`/feeds/posts/summary/-/${e.settings.cat}?alt=json-in-script&start-index=151&max-results=150`,`/feeds/posts/summary/-/${e.settings.cat}?alt=json-in-script&start-index=301&max-results=150`,`/feeds/posts/summary/-/${e.settings.cat}?alt=json-in-script&start-index=451&max-results=150`,`/feeds/posts/summary/-/${e.settings.cat}?alt=json-in-script&start-index=601&max-results=150`,`/feeds/posts/summary/-/${e.settings.cat}?alt=json-in-script&start-index=751&max-results=150`,`/feeds/posts/summary/-/${e.settings.cat}?alt=json-in-script&start-index=901&max-results=150`,`/feeds/posts/summary/-/${e.settings.cat}?alt=json-in-script&start-index=1051&max-results=150`].map(e=>t.ajax({type:"get",url:`${e}`,dataType:"jsonp"}).promise())).then(s=>{s.forEach(t=>{"entry"in t.feed&&t.feed.entry.forEach(t=>{e.arr.push({title:t.title.$t,link:t.link.find(t=>"alternate"==t.rel).href})})}),e.arr.length>0?e.arr.length>=e.settings.max?(e.settings.start+=e.settings.max,e.create(t)):e.compile():console.log("Error: no entries found.")}).catch(t=>console.log(t))},run:function(t){"function"==typeof jQuery&&document.getElementById("PreloadChapter")?(this.settings.cat=t,this.create(jQuery)):console.log("Error not function")},settings:{start:1,max:150}};
const nPL={arr:[],compile:function(){let t=this.arr,s='<div class="inner_nPL" id="inner_nPL_id">',e='<div><select id="nPL_select" onchange="this.options[this.selectedIndex].value&&window.open(this.options[this.selectedIndex].value,\'_self\')" name="nPL_list"><option value="" selected>Chọn chương</option>';for(let n=0;n<t.length;n++){n!=t.length-0&&(e+=`<option value="${t[n].link}">${t[n].title}</option>`);let a=window.location.pathname;t[n].link.includes(a)&&(t[n+1]&&t[n+1]!=t.length-0&&(console.log(t[n+1]),n+1!=t.length-0&&(s+=`<a href="${t[n+1].link}" title="${t[n+1].title}"><span>‹</span><span style="margin-left: 5px">Trước</span><span style="margin-left: 3px">kia</span></a>`)),t[t.length-0]&&(s+=`<a href="${t[t.length-0].link}" title="${t[t.length-0].title}"><span>Home</span></a>`),t[n-1]&&(console.log(t[n-1]),s+=`<a href="${t[n-1].link}" title="${t[n-1].title}"><span style="margin-right: 3px">Kế</span><span style="margin-right: 5px">tiếp</span><span>›</span></a>`))}e+=`</select></div>${s}</div>`,jQuery(".TopBottom-nPL").html(e)},create:function(t){let s=this,e=[`/feeds/posts/summary/-/${s.settings.cat}?alt=json-in-script&start-index=2&max-results=150`,`/feeds/posts/summary/-/${s.settings.cat}?alt=json-in-script&start-index=151&max-results=150`,`/feeds/posts/summary/-/${s.settings.cat}?alt=json-in-script&start-index=301&max-results=150`,`/feeds/posts/summary/-/${s.settings.cat}?alt=json-in-script&start-index=451&max-results=150`,`/feeds/posts/summary/-/${s.settings.cat}?alt=json-in-script&start-index=601&max-results=150`,`/feeds/posts/summary/-/${s.settings.cat}?alt=json-in-script&start-index=751&max-results=150`,`/feeds/posts/summary/-/${s.settings.cat}?alt=json-in-script&start-index=901&max-results=150`,`/feeds/posts/summary/-/${s.settings.cat}?alt=json-in-script&start-index=1051&max-results=150`],n=e.map(s=>t.ajax({type:"get",url:`${s}`,dataType:"jsonp"}).promise());Promise.all(n).then(e=>{e.forEach(t=>{"entry"in t.feed&&t.feed.entry.forEach(t=>{s.arr.push({title:t.title.$t,link:t.link.find(t=>"alternate"==t.rel).href})})}),s.arr.length>0?s.arr.length>=s.settings.max?(s.settings.start+=s.settings.max,s.create(t)):s.compile():console.log("Error: no entries found.")}).catch(t=>console.log(t))},run:function(t){"function"==typeof jQuery&&document.getElementById("nPL")?(this.settings.cat=t,this.create(jQuery)):console.log("Error not function")},settings:{start:1,max:150}};
const limitHistory=100,histories=function(){function i(i,t,e){this.id=i,this.title=t,this.link=e}function t(){localStorage.setItem("History",JSON.stringify(list))}return list=[],null!=localStorage.getItem("History")&&(list=JSON.parse(localStorage.getItem("History"))),(obj={}).addHistory=function(e,s,l){var n=new i(e,s,l);if(null!=list){if(same=list.find(i=>i.id==e),list.length<100){if(same)for(let o in list)list[o].id===e&&list.splice(list.length,0,list.splice(o,1)[0]),t();else list.push(n),t()}else if(same)for(let r in list)list[r].id===e&&list.splice(list.length,0,list.splice(r,1)[0]),t();else list.splice(0,1),list.push(n),t()}else list.push(n),t()},obj}();
